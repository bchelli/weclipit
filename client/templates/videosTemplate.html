<template name="videosTemplate">
  {{#if isPlaylistSelected}}
    {{#with playlist}}
    <div class="video-title">
      <!img class="owner-picture" src="http://graph.facebook.com/{{owner}}/picture" />
      <h3>{{name}}</h3>
    {{#if isMine}}
      <a href="#" class="playlist-share" playlist="{{_id}}"><i class="icon-share-alt"></i> Share</a>
      -
      <a href="#" class="playlist-edit" playlist="{{_id}}"><i class="icon-pencil"></i> Edit</a>
      -
    {{/if}}
      <a href="#" class="playlist-remove" playlist="{{_id}}"><i class="icon-remove"></i> Remove</a>
    </div>
    {{/with}}
    {{#if playlist.canAccess.length}}
    <div class="shared-users">
    {{#each playlist.canAccess}}
      <img data-src="http://graph.facebook.com/{{.}}/picture" />
    {{/each}}
    </div>
    {{/if}}
    <div class="video-title">
      <!img class="owner-picture" src="http://graph.facebook.com/{{owner}}/picture" />
      <h3>Videos</h3>
    {{#if rightTo "canAddVideo" playlist myUser}}
      <a href="#" id="add-video"><i class="icon-plus-sign"></i> Add a new Video</a><br /><br />
    {{/if}}
    </div>
    <table class="table table-condensed videos-list">
      <thead>
        <tr>
          <th></th>
          <th></th>
          <th>Name</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      {{#each videos}}
        <tr class="video{{#if isPlaying}} {{else}} not-playing {{/if}}" playlist="{{playlist._id}}" video="{{_id}}">
          <td class="videos-likes">
            <a href="#" class="like-video" video="{{_id}}">
              <i class="{{liked}}"></i><br />{{nbLikes}}
            </a>
          </td>
          <td class="videos-preview"><div class="img-container"><img src="{{data.thumbnail_url}}" /></div></td>
          <td class="videos-description">
            <div class="video-description-title">{{data.title}}</div>
            <div class="video-description-origin">
              from <a href="{{data.provider_url}}" target="_blank">{{data.provider_name}}</a>
              by <a href="{{data.author_url}}" target="_blank">{{data.author_name}}</a>
            </div>
          </td>
          <td class="videos-playing">
            <a href="#" class="remove-video" video="{{_id}}">
            {{#if rightTo "canRemoveVideo" playlist myUser owner}}
            <i class="icon-remove"></i>
            {{/if}}
            </a>
          </td>
        </tr>
      {{/each}}
      </tbody>
    </table>
    {{> remove-video-popup}}
    {{> add-video-popup}}
    {{> remove-playlist-popup}}
    {{> share-playlist-popup}}
  {{/if}}
</template>


<template name="remove-video-popup">
  <div class="modal hide fade" id="remove-video-modal">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>Remove a Video</h3>
    </div>
    <div class="modal-body">
      <p>Please confirm the deletion of this video</p>
    </div>
    <div class="modal-footer">
      <div class="controls">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
        <a href="#" class="btn btn-danger" id="remove-video-submit">Remove</a>
      </div>
    </div>
  </div>
</template>


<template name="add-video-popup">
  <div class="modal hide fade" id="add-video-modal">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>Add a Video</h3>
    </div>
    <form class="form-horizontal">
      <div class="modal-body">
        <input type="text" id="add-video-url" placeholder="URL">
        <img src="/img/player-support.png" />
      </div>
      <div class="modal-footer">
        <div class="controls">
          <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
          <button type="submit" class="btn btn-primary">Add</button>
        </div>
      </div>
    </form>
  </div>
</template>


<template name="remove-playlist-popup">
  <div class="modal hide fade" id="remove-playlist-modal">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>Remove a Playlist</h3>
    </div>
    <div class="modal-body">
      <p>Please confirm the deletion of this playlist</p>
    </div>
    <div class="modal-footer">
      <div class="controls">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
        <a href="#" class="btn btn-danger" id="remove-playlist-submit">Remove</a>
      </div>
    </div>
  </div>
</template>


<template name="share-playlist-popup">
  <div class="modal hide fade" id="share-playlist-modal">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>Share Playlist</h3>
    </div>
    <div class="modal-body">
      <div class="input-prepend input-append">
        <span class="add-on">Filter</span>
        <input id="filter-share-users-list" type="text" />
        <span class="add-on">Select: <a href="#" id="share-playlist-select-all">all</a> / <a href="#" id="share-playlist-select-none">none</a></span>
      </div>
      <div id="share-users-list"></div>
    </div>
    <div class="modal-footer">
      <div class="controls">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
        <a href="#" class="btn btn-primary" id="share-playlist-submit">Share</a>
      </div>
    </div>
  </div>
</template>